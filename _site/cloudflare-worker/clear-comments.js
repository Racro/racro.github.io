async function listKeys(){const t=await fetch(`https://api.cloudflare.com/client/v4/accounts/${ACCOUNT_ID}/storage/kv/namespaces/${NAMESPACE_ID}/keys`,{headers:{Authorization:`Bearer ${API_TOKEN}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error(`Failed to list keys: ${t.statusText}`);return(await t.json()).result||[]}async function deleteKey(t){return(await fetch(`https://api.cloudflare.com/client/v4/accounts/${ACCOUNT_ID}/storage/kv/namespaces/${NAMESPACE_ID}/values/${encodeURIComponent(t)}`,{method:"DELETE",headers:{Authorization:`Bearer ${API_TOKEN}`}})).ok}async function clearComments(){ACCOUNT_ID&&API_TOKEN||process.exit(1);const t=await listKeys(),e=t.map((t=>t.name)).filter((t=>t.startsWith("/poems/")||t.startsWith("reactions:")||t.startsWith("rate_limit:")||t.startsWith("user_reaction:")));if(0===e.length)return;for(const t of e){await deleteKey(t)?0:0,await new Promise((t=>setTimeout(t,100)))}}const NAMESPACE_ID="07fbbf326b594ff2a40b2ad20c7bc2b3",ACCOUNT_ID=process.env.CLOUDFLARE_ACCOUNT_ID,API_TOKEN=process.env.CLOUDFLARE_API_TOKEN;clearComments().catch(console.error);